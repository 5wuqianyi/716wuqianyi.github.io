<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>初一16班47人活动管理系统</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "Microsoft YaHei", sans-serif;
        }
        /* 首页样式 - 可滚动 */
        .home-page {
            min-height: 100vh;
            background: #ffffff;
            padding: 2rem 0;
        }
        .home-container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            text-align: center;
            padding: 0 1rem;
        }
        .home-title {
            color: #2c3e50;
            font-size: 2.5rem;
            margin-bottom: 3rem;
        }
        .home-btn-group {
            display: flex;
            gap: 2rem;
            justify-content: center;
            margin-bottom: 5rem;
        }
        .home-btn {
            padding: 1.2rem 3rem;
            border: none;
            border-radius: 8px;
            font-size: 1.2rem;
            font-weight: bold;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }
        .sign-nav-btn {
            background: #3498db;
        }
        .draw-nav-btn {
            background: #2ecc71;
        }
        .home-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
        }

        /* 下滑图文展示区 */
        .home-gallery {
            width: 100%;
            max-width: 1000px;
            margin: 0 auto;
            padding: 2rem 1rem;
            display: flex;
            flex-direction: column;
            gap: 3rem;
        }
        .gallery-item {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
            align-items: center;
        }
        .gallery-img {
            width: 100%;
            max-width: 600px;
            height: 400px;
            object-fit: cover;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        .gallery-text {
            width: 100%;
            max-width: 600px;
            font-size: 1.1rem;
            color: #34495e;
            line-height: 1.6;
        }

        /* 签到和抽奖面板通用样式 */
        .function-page {
            display: none;
            min-height: 100vh;
            padding: 2rem;
            align-items: center;
            justify-content: center;
        }
        .sign-page {
            background: linear-gradient(135deg, #43cea2 0%, #185a9d 100%);
        }
        .draw-page {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .container {
            max-width: 800px;
            width: 100%;
            background: white;
            padding: 2.5rem;
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.2);
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 1.5rem;
        }
        .back-btn {
            background: #95a5a6;
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 6px;
            cursor: pointer;
            margin-bottom: 1rem;
        }
        .edit-area {
            margin-bottom: 1.5rem;
        }
        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: bold;
            color: #34495e;
        }
        #nameList, #nameListDraw {
            width: 100%;
            height: 120px;
            padding: 0.8rem;
            border: 1px solid #ddd;
            border-radius: 6px;
            resize: none;
            font-size: 1rem;
        }
        .btn-group {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-bottom: 2rem;
        }
        button {
            padding: 1rem 2rem;
            border: none;
            border-radius: 6px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        /* 签到面板专属样式 */
        #loadBtn {
            background: #3498db;
            color: white;
        }
        #resetSignBtn {
            background: #e74c3c;
            color: white;
        }
        .sign-stat {
            text-align: center;
            font-size: 1.1rem;
            font-weight: bold;
            color: #e74c3c;
            margin-bottom: 1rem;
            padding: 0.5rem;
            border-radius: 6px;
            background: #fef5f5;
        }
        .sign-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }
        .sign-item {
            padding: 1rem;
            background: #f8f9fa;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .sign-item:hover {
            background: #e3e6e9;
        }
        .signed {
            background: #d4edda;
            color: #155724;
            font-weight: bold;
        }
        .signed:hover {
            background: #c3e6cb;
        }

        /* 抽奖面板专属样式 */
        #drawBtn {
            background: #2ecc71;
            color: white;
        }
        #resetDrawBtn {
            background: #e74c3c;
            color: white;
        }
        .result {
            text-align: center;
            padding: 2rem;
            background: #f8f9fa;
            border-radius: 8px;
            margin-top: 1rem;
        }
        #resultText {
            font-size: 2rem;
            font-weight: bold;
            color: #2c3e50;
            margin-top: 1rem;
            height: 3rem; /* 固定高度防止抖动 */
            line-height: 3rem;
        }
        /* 抽奖滚动动画样式 */
        .rolling {
            color: #e74c3c;
            animation: flash 0.1s infinite;
        }
        @keyframes flash {
            0% { opacity: 0.5; }
            100% { opacity: 1; }
        }
    </style>
</head>
<body>
    <!-- 首页 -->
    <div class="home-page" id="homePage">
        <div class="home-container">
            <h1 class="home-title">初一16班47人活动管理系统</h1>
            <div class="home-btn-group">
                <button class="home-btn sign-nav-btn" onclick="showPage('signPage')">进入签到系统</button>
                <button class="home-btn draw-nav-btn" onclick="showPage('drawPage')">进入抽奖系统</button>
            </div>
        </div>

        <!-- 下滑图文展示区 -->
        <div class="home-gallery">





        </div>
    </div>

    <!-- 签到系统页面 -->
    <div class="function-page sign-page" id="signPage">
        <div class="container">
            <button class="back-btn" onclick="showPage('homePage')">返回首页</button>
            <h1>47人签到系统</h1>
            <div class="edit-area">
                <label for="nameList">编辑47位参与者姓名（每行1人）</label>
                <textarea id="nameList">
1蒋孟航
2李思琦
3陈琂臻
4张芯翊
5黄一校
6吴杄熠
7高熙骏
8郑语萱
9何宸昕
10石轩毅
11吴宛芯
12朱景源
13杜芊羽
14张鑫辰
15陈昊君
16黄语晨
17谢子恩
18姚泓远
19林宣含
20林烁杰
21陈子正
22孙铭浩
23邱添
24王辰祺
25谢锦星
26陈馨睿
27谢梓豪
28陈启薇
29林予硕
30林梦初
31王心雅
32庄星宇
33郑楚钧
34陈芊慧
35王语萌
36郑仕晨
37吴宥翰
38高浩铭
39蔡雨辰
40陈靖雅
41彭晗一
42杨觐慈
43郑凯文
44许洋赫
45周子蒙
46林咏燑
47林玥彤
                </textarea>
            </div>
            <div class="btn-group">
                <button id="loadBtn">加载名单</button>
                <button id="resetSignBtn">重置签到</button>
            </div>
            <div class="sign-container">
                <h3>签到列表</h3>
                <div class="sign-stat" id="signStat">未签到人数：47人</div>
                <div class="sign-list" id="signList"></div>
            </div>
        </div>
    </div>

    <!-- 抽奖系统页面 -->
    <div class="function-page draw-page" id="drawPage">
        <div class="container">
            <button class="back-btn" onclick="showPage('homePage')">返回首页</button>
            <h1>47人抽奖系统</h1>
            <div class="edit-area">
                <label for="nameListDraw">编辑47位参与者姓名（每行1人）</label>
                <textarea id="nameListDraw">
1蒋孟航
2李思琦
3陈琂臻
4张芯翊
5黄一校
6吴杄熠
7高熙骏
8郑语萱
9何宸昕
10石轩毅
11吴宛芯
12朱景源
13杜芊羽
14张鑫辰
15陈昊君
16黄语晨
17谢子恩
18姚泓远
19林宣含
20林烁杰
21陈子正
22孙铭浩
23邱添
24王辰祺
25谢锦星
26陈馨睿
27谢梓豪
28陈启薇
29林予硕
30林梦初
31王心雅
32庄星宇
33郑楚钧
34陈芊慧
35王语萌
36郑仕晨
37吴宥翰
38高浩铭
39蔡雨辰
40陈靖雅
41彭晗一
42杨觐慈
43郑凯文
44许洋赫
45周子蒙
46林咏燑
47林玥彤
                </textarea>
            </div>
            <div class="btn-group">
                <button id="drawBtn">开始抽签</button>
                <button id="resetDrawBtn">重置抽奖</button>
            </div>
            <div class="result">
                <p>抽奖结果</p >
                <div id="resultText">暂无结果</div>
            </div>
        </div>
    </div>

    <script>
        // 页面切换逻辑
        function showPage(pageId) {
            document.querySelectorAll('.home-page, .function-page').forEach(page => {
                page.style.display = 'none';
            });
            if(pageId === 'homePage') {
                document.getElementById(pageId).style.display = 'block';
            } else {
                document.getElementById(pageId).style.display = 'flex';
            }
        }

        // 签到功能逻辑
        let nameList = [];
        const signListEl = document.getElementById('signList');
        const nameListEl = document.getElementById('nameList');
        const loadBtnEl = document.getElementById('loadBtn');
        const resetSignBtnEl = document.getElementById('resetSignBtn');
        const signStatEl = document.getElementById('signStat');

        function updateSignStat() {
            const signedCount = document.querySelectorAll('.sign-item.signed').length;
            const unsignedCount = nameList.length - signedCount;
            signStatEl.textContent = `未签到人数：${unsignedCount}人 | 已签到人数：${signedCount}人`;
        }

        function loadNames() {
            nameList = nameListEl.value.split('\n').map(name => name.trim()).filter(name => name.length > 0);
            if (nameList.length !== 47) {
                alert(`当前名单共${nameList.length}人，请确保正好47人！`);
                return;
            }
            signListEl.innerHTML = '';
            nameList.forEach(name => {
                const item = document.createElement('div');
                item.className = 'sign-item';
                item.textContent = name;
                item.addEventListener('click', () => {
                    item.classList.toggle('signed');
                    item.textContent = item.classList.contains('signed') ? `${name}（已签到）` : name;
                    updateSignStat();
                });
                signListEl.appendChild(item);
            });
            updateSignStat();
        }

        function resetSign() {
            document.querySelectorAll('.sign-item').forEach(item => {
                item.classList.remove('signed');
                const name = item.textContent.split('（')[0];
                item.textContent = name;
            });
            updateSignStat();
        }

        loadBtnEl.addEventListener('click', loadNames);
        resetSignBtnEl.addEventListener('click', resetSign);
        window.onload = () => {
            loadNames();
            initDrawNames();
        };

        // 抽奖功能逻辑 - 新增3秒滚动动画
        let originalNames = [];
        let remainingNames = [];
        const nameListDrawEl = document.getElementById('nameListDraw');
        const resultTextEl = document.getElementById('resultText');
        const drawBtnEl = document.getElementById('drawBtn');
        const resetDrawBtnEl = document.getElementById('resetDrawBtn');
        let rollingInterval = null; // 滚动定时器

        function initDrawNames() {
            originalNames = nameListDrawEl.value.split('\n').map(name => name.trim()).filter(name => name.length > 0);
            if (originalNames.length !== 47) {
                alert(`抽奖名单共${originalNames.length}人，请确保正好47人！`);
            }
            remainingNames = [...originalNames];
        }

        // 随机获取一个名字用于滚动
        function getRandomName() {
            const randomIndex = Math.floor(Math.random() * originalNames.length);
            return originalNames[randomIndex];
        }

        function drawName() {
            if (remainingNames.length === 0) {
                alert('所有人员已抽完，请重置！');
                return;
            }
            // 禁用抽奖按钮防止重复点击
            drawBtnEl.disabled = true;
            drawBtnEl.style.opacity = '0.6';
            // 添加滚动样式
            resultTextEl.classList.add('rolling');
            // 启动名字滚动
            rollingInterval = setInterval(() => {
                resultTextEl.textContent = getRandomName();
            }, 100);
            // 3秒后停止滚动，显示最终结果
            setTimeout(() => {
                clearInterval(rollingInterval);
                resultTextEl.classList.remove('rolling');
                const randomIndex = Math.floor(Math.random() * remainingNames.length);
                const drawnName = remainingNames[randomIndex];
                remainingNames.splice(randomIndex, 1);
                resultTextEl.textContent = drawnName;
                // 启用抽奖按钮
                drawBtnEl.disabled = false;
                drawBtnEl.style.opacity = '1';
            }, 3000); // 3000毫秒 = 3秒
        }

        function resetDraw() {
            remainingNames = [...originalNames];
            resultTextEl.textContent = '暂无结果';
            // 清除定时器（防止重置时还在滚动）
            if(rollingInterval) clearInterval(rollingInterval);
            resultTextEl.classList.remove('rolling');
            drawBtnEl.disabled = false;
            drawBtnEl.style.opacity = '1';
        }

        drawBtnEl.addEventListener('click', drawName);
        resetDrawBtnEl.addEventListener('click', resetDraw);
        nameListDrawEl.addEventListener('blur', initDrawNames);
    </script>
</body>
</html>